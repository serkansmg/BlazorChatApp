@using BlazorChatApp.Models.Video
@using Radzen
@using Radzen.Blazor

<RadzenCard Class="video-participant-card" Style="position: relative; height: 200px;">
    <!-- Video Element -->
    <video id="video-@Participant.UserId" 
           style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;"
           autoplay muted="@IsLocal" playsinline>
    </video>
    
    <!-- Overlay Info -->
    <div style="position: absolute; bottom: 8px; left: 8px; right: 8px; 
                background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; 
                border-radius: 4px; display: flex; justify-content: space-between; align-items: center;">
        <RadzenText TextStyle="TextStyle.Caption">@Participant.DisplayName</RadzenText>
        
        <RadzenStack Orientation="Orientation.Horizontal" Gap="0.25rem">
            @if (Participant.IsMuted)
            {
                <RadzenIcon Icon="mic_off" Style="font-size: 16px; color: #ff4444;" />
            }
            
            @if (!Participant.IsVideoEnabled)
            {
                <RadzenIcon Icon="videocam_off" Style="font-size: 16px; color: #ff4444;" />
            }
            
            @if (Participant.IsScreenSharing)
            {
                <RadzenIcon Icon="screen_share" Style="font-size: 16px; color: #44ff44;" />
            }
        </RadzenStack>
    </div>
    
    <!-- No Video Placeholder -->
    @if (!Participant.IsVideoEnabled)
    {
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; 
                    background: #333; display: flex; align-items: center; justify-content: center;
                    border-radius: 8px;">
            <RadzenStack AlignItems="AlignItems.Center" Gap="0.5rem">
                <RadzenImage Path="@Participant.AvatarUrl" Style="width: 60px; height: 60px; border-radius: 50%;" />
                <RadzenText TextStyle="TextStyle.Caption" Style="color: white;">@Participant.DisplayName</RadzenText>
            </RadzenStack>
        </div>
    }
</RadzenCard>

@code {
    [Parameter] public VideoParticipant Participant { get; set; } = null!;
    [Parameter] public bool IsLocal { get; set; } = false;
}